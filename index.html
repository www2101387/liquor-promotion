<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>年终福利 - 贵州华世美酒</title>
    <!-- Tailwind CSS v3 -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#e60012',
                        secondary: '#c41230',
                        gold: '#d4af37',
                        darkgold: '#b8860b',
                        darkred: '#8b0000',
                    },
                    fontFamily: {
                        sans: ['Arial', 'PingFang SC', 'Microsoft YaHei', 'sans-serif'],
                    },
                    animation: {
                        'bounce-slow': 'bounce 2s infinite',
                        'pulse-slow': 'pulse 3s infinite',
                        'countdown': 'countdown 1s linear infinite',
                    },
                    keyframes: {
                        bounce: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        },
                        pulse: {
                            '0%, 100%': { opacity: 1 },
                            '50%': { opacity: 0.7 },
                        },
                        countdown: {
                            '0%': { transform: 'scale(1)' },
                            '50%': { transform: 'scale(1.1)' },
                            '100%': { transform: 'scale(1)' },
                        },
                        shake: {
                            '0%, 100%': { transform: 'translateX(0)' },
                            '10%, 30%, 50%, 70%, 90%': { transform: 'translateX(-5px)' },
                            '20%, 40%, 60%, 80%': { transform: 'translateX(5px)' },
                        }
                    }
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .text-shadow {
                text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            }
            .text-stroke {
                -webkit-text-stroke: 1px #d4af37;
                color: transparent;
            }
            .bg-gradient-red {
                background: linear-gradient(to bottom, #e60012, #8b0000);
            }
            .border-gold {
                border-color: #d4af37;
                border-width: 2px;
            }
            .shadow-red {
                box-shadow: 0 4px 15px rgba(230, 0, 18, 0.4);
            }
        }
    </style>
</head>
<body class="font-sans bg-gray-100">
    <!-- 主容器 -->
    <div class="max-w-md mx-auto bg-white shadow-lg overflow-hidden">
        <!-- 顶部促销横幅 -->
        <div class="bg-gradient-red text-white p-4 relative overflow-hidden">
            <div class="absolute top-0 left-0 w-full h-full">
                <div class="absolute top-0 left-0 w-full h-2 bg-gold"></div>
                <div class="absolute bottom-0 left-0 w-full h-2 bg-gold"></div>
                <div class="absolute top-0 left-0 w-2 h-full bg-gold"></div>
                <div class="absolute top-0 right-0 w-2 h-full bg-gold"></div>
            </div>
            
            <div class="relative z-10 text-center">
                <h1 class="text-2xl font-bold mb-1 text-shadow">年终福利 领好酒</h1>
                <h2 class="text-3xl font-bold mb-2 text-gold text-shadow">贵州华世美酒</h2>
                <p class="text-sm">立即领取白酒+高端腕表</p>
            </div>
        </div>
        
        <!-- 产品展示区 -->
        <div class="relative p-4 bg-white">
            <!-- 产品图片 -->
            <div class="relative mb-4">
                <img src="https://p3-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/rc/pc/super_tool/d168e645226947a19f0bd3c9eb59db99~tplv-a9rns2rl98-image.image?rcl=202601022310505CF360084AC794453DCD&rk3s=8e244e95&rrcfp=f06b921b&x-expires=1769958683&x-signature=SJPfDBXGs9p1EOOitiXhVgSPFxA%3D" 
                     alt="贵州华世美酒" 
                     class="w-full h-auto rounded-lg">
                
                <!-- 促销标签 -->
                <div class="absolute top-4 right-4 bg-primary text-white text-xs font-bold px-3 py-1 rounded-full transform rotate-12 shadow-red">
                    限时抢购
                </div>
                
                <!-- 赠品标签 -->
                <div class="absolute bottom-4 right-4 bg-gold text-white text-xs font-bold px-3 py-1 rounded-full shadow-lg">
                    买就送名表
                </div>
            </div>
            
            <!-- 产品信息 -->
            <div class="mb-6">
                <div class="flex justify-between items-center mb-2">
                    <h3 class="text-lg font-bold text-gray-800">贵州华世美酒</h3>
                    <span class="text-primary font-bold">53°</span>
                </div>
                
                <div class="flex items-center text-sm text-gray-600 mb-4">
                    <i class="fa fa-check-circle text-primary mr-1"></i>
                    <span>茅台镇原产</span>
                    <span class="mx-2">|</span>
                    <i class="fa fa-check-circle text-primary mr-1"></i>
                    <span>500ml×2瓶装</span>
                </div>
                
                <!-- 价格信息 -->
                <div class="flex items-center mb-2">
                    <span class="text-sm text-gray-500 line-through mr-2">原价: ¥2999</span>
                    <span class="text-xl font-bold text-primary">限时价: ¥1299</span>
                </div>
                
                <!-- 促销描述 -->
                <p class="text-sm text-gray-600">
                    贵州华世美酒，源自茅台镇核心产区，采用传统工艺酿造，口感醇厚，香气浓郁，是宴请宾朋、赠送亲友的佳品。
                </p>
            </div>
            
            <!-- 产品包装展示 -->
            <div class="mb-6">
                <h4 class="text-center font-bold text-gray-800 mb-3">豪华包装</h4>
                <div class="flex justify-center">
                    <img src="https://p3-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/rc/pc/super_tool/83a3e021337d41809be7b7de9a1a411c~tplv-a9rns2rl98-image.image?rcl=202601022310505CF360084AC794453DCD&rk3s=8e244e95&rrcfp=f06b921b&x-expires=1769958685&x-signature=tLs%2Fn7Bp0Q7jiLNS0pChRfNxnes%3D" 
                         alt="豪华包装" 
                         class="w-64 h-auto rounded-lg">
                </div>
            </div>
            
            <!-- 赠品展示 -->
            <div class="bg-gray-50 p-4 rounded-lg mb-6 border border-gray-200">
                <h4 class="text-center font-bold text-gray-800 mb-3">购买即送豪华赠品</h4>
                <div class="flex justify-center">
                    <img src="https://p9-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/rc/pc/super_tool/d4e7dadb28b748749ffa1369c004a70a~tplv-a9rns2rl98-image.image?rcl=202601022310505CF360084AC794453DCD&rk3s=8e244e95&rrcfp=f06b921b&x-expires=1769958684&x-signature=aPwV70T9SUm1cdS2bjDc%2FrESHTY%3D" 
                         alt="豪华腕表赠品" 
                         class="w-48 h-auto">
                </div>
                <p class="text-center text-sm text-gray-600 mt-2">价值¥1999的豪华金表</p>
            </div>
            
            <!-- 倒计时区域 -->
            <div class="bg-primary text-white p-4 rounded-lg mb-6 shadow-red">
                <h4 class="text-center font-bold mb-3">限时抢购倒计时</h4>
                <div class="flex justify-center space-x-4">
                    <div class="countdown-item bg-white text-primary rounded-lg p-2 w-16 text-center">
                        <span id="days" class="text-xl font-bold block">03</span>
                        <span class="text-xs">天</span>
                    </div>
                    <div class="countdown-item bg-white text-primary rounded-lg p-2 w-16 text-center">
                        <span id="hours" class="text-xl font-bold block">12</span>
                        <span class="text-xs">时</span>
                    </div>
                    <div class="countdown-item bg-white text-primary rounded-lg p-2 w-16 text-center">
                        <span id="minutes" class="text-xl font-bold block">34</span>
                        <span class="text-xs">分</span>
                    </div>
                    <div class="countdown-item bg-white text-primary rounded-lg p-2 w-16 text-center">
                        <span id="seconds" class="text-xl font-bold block">56</span>
                        <span class="text-xs">秒</span>
                    </div>
                </div>
            </div>
            
            <!-- 用户信息表单 -->
            <div class="bg-gray-50 p-4 rounded-lg mb-6 border border-gray-200">
                <h4 class="text-center font-bold text-gray-800 mb-4">填写信息领取</h4>
                <form id="user-info-form" class="space-y-4">
                    <div>
                        <label for="name" class="block text-sm font-medium text-gray-700 mb-1">姓名</label>
                        <input type="text" id="name" name="name" placeholder="请输入您的姓名" 
                               class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent" required>
                    </div>
                    <div>
                        <label for="phone" class="block text-sm font-medium text-gray-700 mb-1">手机号码</label>
                        <input type="tel" id="phone" name="phone" placeholder="请输入您的手机号码" 
                               class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent" required pattern="[0-9]{11}">
                    </div>
                    <div>
                        <label for="region" class="block text-sm font-medium text-gray-700 mb-1">
                            地区选择
                            <span id="location-status" class="text-xs text-primary ml-2">
                                <i class="fa fa-spinner fa-spin"></i> 正在定位...
                            </span>
                            <button type="button" data-location-btn class="text-primary hover:text-primary-dark focus:outline-none ml-2" title="使用GPS定位">
                                <i class="fa fa-map-marker"></i>
                            </button>
                        </label>
                        <select id="region" name="region" 
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent" required>
                            <option value="">请选择您的地区</option>
                            <option value="beijing">北京市</option>
                            <option value="shanghai">上海市</option>
                            <option value="tianjin">天津市</option>
                            <option value="chongqing">重庆市</option>
                            <option value="hebei">河北省</option>
                            <option value="shanxi">山西省</option>
                            <option value="inner_mongolia">内蒙古自治区</option>
                            <option value="liaoning">辽宁省</option>
                            <option value="jilin">吉林省</option>
                            <option value="heilongjiang">黑龙江省</option>
                            <option value="jiangsu">江苏省</option>
                            <option value="zhejiang">浙江省</option>
                            <option value="anhui">安徽省</option>
                            <option value="fujian">福建省</option>
                            <option value="jiangxi">江西省</option>
                            <option value="shandong">山东省</option>
                            <option value="henan">河南省</option>
                            <option value="hubei">湖北省</option>
                            <option value="hunan">湖南省</option>
                            <option value="guangdong">广东省</option>
                            <option value="guangxi">广西壮族自治区</option>
                            <option value="hainan">海南省</option>
                            <option value="sichuan">四川省</option>
                            <option value="guizhou">贵州省</option>
                            <option value="yunnan">云南省</option>
                            <option value="tibet">西藏自治区</option>
                            <option value="shaanxi">陕西省</option>
                            <option value="gansu">甘肃省</option>
                            <option value="qinghai">青海省</option>
                            <option value="ningxia">宁夏回族自治区</option>
                            <option value="xinjiang">新疆维吾尔自治区</option>
                            <option value="hong_kong">香港特别行政区</option>
                            <option value="macau">澳门特别行政区</option>
                            <option value="taiwan">台湾省</option>
                            <option value="overseas">海外地区</option>
                        </select>
                    </div>
                </form>
            </div>
            
            <!-- 引导区域 -->
            <div class="text-center mb-6">
                <p class="text-lg font-bold text-primary mb-2">点击下方按钮领取</p>
                <div class="flex justify-center animate-bounce-slow">
                    <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTYwMDEyIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgY2xhc3M9ImZlYXRoZXIgZmVhdGhlci1ncm93biI+PHBhdGggZD0iTTExLjk5OSA5LjAwMWwuMDAxLTEuMDAxTDYuNDk5IDE0LjUwMUw3LjkwOSAxNS41TDExLjk5OSAxMS40M0wxNi4xIDE1LjVMMTUuNSAxNC41TDExLjk5OSA5LjAwMXoiLz48L3N2Zz4=" 
                         alt="向下箭头" 
                         class="w-12 h-12">
                </div>
                <p class="text-sm text-gray-500 mt-2">限量1000份，先到先得</p>
            </div>
            
            <!-- 购买按钮 -->
            <button id="buy-button" class="w-full bg-gradient-red text-white font-bold py-4 px-6 rounded-full shadow-red transform transition-transform hover:scale-105 active:scale-95 mb-4">
                立即领取
            </button>
            
            <!-- 底部说明 -->
            <div class="text-xs text-gray-500 text-center">
                <p>活动最终解释权归贵州华世美酒所有</p>
                <p class="mt-1">本活动仅限18岁以上成年人参与</p>
            </div>
        </div>
    </div>
    
    <!-- 购买成功弹窗 -->
    <div id="success-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden">
        <div class="bg-white rounded-xl shadow-xl max-w-xs w-full p-6">
            <div class="text-center">
                <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fa fa-check text-3xl text-green-500"></i>
                </div>
                <h3 class="text-xl font-bold text-gray-800 mb-2">领取成功！</h3>
                <p class="text-gray-600 mb-6">恭喜您成功领取贵州华世美酒+豪华腕表套装！</p>
                <p class="text-sm text-gray-500 mb-6">客服将在24小时内与您联系确认订单信息</p>
                <button id="close-modal" class="w-full bg-primary text-white font-bold py-3 px-6 rounded-lg shadow-red">
                    确定
                </button>
            </div>
        </div>
    </div>

    <script>
        // 坐标到地区的映射表（主要城市坐标）
        const cityCoordinates = {
            'beijing': { lat: 39.9042, lng: 116.4074 },
            'shanghai': { lat: 31.2304, lng: 121.4737 },
            'guangzhou': { lat: 23.1291, lng: 113.2644 },
            'shenzhen': { lat: 22.5431, lng: 114.0579 },
            'chengdu': { lat: 30.5728, lng: 104.0668 },
            'hangzhou': { lat: 30.2741, lng: 120.1551 },
            'nanjing': { lat: 32.0603, lng: 118.7969 },
            'wuhan': { lat: 30.5928, lng: 114.3055 },
            'xian': { lat: 34.3416, lng: 108.9398 },
            'chongqing': { lat: 29.4316, lng: 106.9123 },
            'tianjin': { lat: 39.0842, lng: 117.2009 },
            'jinan': { lat: 36.6512, lng: 117.1201 },
            'shenyang': { lat: 41.8057, lng: 123.4315 },
            'harbin': { lat: 45.8038, lng: 126.5350 },
            'changsha': { lat: 28.2278, lng: 112.9388 },
            'changchun': { lat: 43.8168, lng: 125.3240 },
            'kunming': { lat: 25.0389, lng: 102.7183 },
            'zhengzhou': { lat: 34.7466, lng: 113.6253 },
            'hefei': { lat: 31.8206, lng: 117.2272 },
            'fuzhou': { lat: 26.0745, lng: 119.2965 },
            'nanchang': { lat: 28.6820, lng: 115.8579 },
            'guiyang': { lat: 26.6470, lng: 106.6302 },
            'lanzhou': { lat: 36.0611, lng: 103.8343 },
            'ningxia': { lat: 38.4872, lng: 106.2309 },
            'lhasa': { lat: 29.6500, lng: 91.1000 },
            'urumqi': { lat: 43.8256, lng: 87.6168 },
            'haikou': { lat: 20.0442, lng: 110.1995 },
            'taipei': { lat: 25.0330, lng: 121.5654 },
            'hongkong': { lat: 22.3193, lng: 114.1694 }
        };

        // 计算两点之间的距离（公里）
        function calculateDistance(lat1, lon1, lat2, lon2) {
            const R = 6371; // 地球半径（公里）
            const dLat = (lat2 - lat1) * Math.PI / 180;
            const dLon = (lon2 - lon1) * Math.PI / 180;
            const a = 
                Math.sin(dLat/2) * Math.sin(dLat/2) +
                Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * 
                Math.sin(dLon/2) * Math.sin(dLon/2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
            return R * c;
        }

        // 根据坐标获取最近的地区
        function getNearestRegion(lat, lng) {
            let nearestRegion = 'overseas';
            let minDistance = Infinity;
            
            // 遍历所有城市坐标，找到最近的
            for (const [region, coords] of Object.entries(cityCoordinates)) {
                const distance = calculateDistance(lat, lng, coords.lat, coords.lng);
                if (distance < minDistance) {
                    minDistance = distance;
                    nearestRegion = region;
                }
            }
            
            // 省份映射
            const provinceMap = {
                'beijing': 'beijing',
                'shanghai': 'shanghai',
                'guangzhou': 'guangdong',
                'shenzhen': 'guangdong',
                'chengdu': 'sichuan',
                'hangzhou': 'zhejiang',
                'nanjing': 'jiangsu',
                'wuhan': 'hubei',
                'xian': 'shaanxi',
                'chongqing': 'chongqing',
                'tianjin': 'tianjin',
                'jinan': 'shandong',
                'shenyang': 'liaoning',
                'harbin': 'heilongjiang',
                'changsha': 'hunan',
                'changchun': 'jilin',
                'kunming': 'yunnan',
                'zhengzhou': 'henan',
                'hefei': 'anhui',
                'fuzhou': 'fujian',
                'nanchang': 'jiangxi',
                'guiyang': 'guizhou',
                'lanzhou': 'gansu',
                'ningxia': 'ningxia',
                'lhasa': 'tibet',
                'urumqi': 'xinjiang',
                'haikou': 'hainan',
                'taipei': 'taiwan',
                'hongkong': 'hong_kong'
            };
            
            return provinceMap[nearestRegion] || 'overseas';
        }

        // 使用浏览器定位API获取位置
        function getLocation() {
            const locationStatus = document.getElementById('location-status');
            const regionSelect = document.getElementById('region');
            
            if (navigator.geolocation) {
                locationStatus.innerHTML = '<i class="fa fa-spinner fa-spin"></i> 正在获取GPS位置...';
                locationStatus.classList.remove('text-green-500', 'text-red-500', 'text-blue-500');
                locationStatus.classList.add('text-gray-500');
                
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        const lat = position.coords.latitude;
                        const lng = position.coords.longitude;
                        
                        // 获取最近的地区
                        const nearestRegion = getNearestRegion(lat, lng);
                        
                        // 设置地区选择
                        regionSelect.value = nearestRegion;
                        
                        // 更新状态
                        locationStatus.innerHTML = '<i class="fa fa-check-circle"></i> GPS定位成功';
                        locationStatus.classList.remove('text-gray-500', 'text-red-500', 'text-blue-500');
                        locationStatus.classList.add('text-green-500');
                        
                        // 显示定位详情
                        setTimeout(() => {
                            locationStatus.innerHTML = `<i class="fa fa-info-circle"></i> 基于GPS定位 (${lat.toFixed(4)}, ${lng.toFixed(4)})`;
                        }, 2000);
                    },
                    (error) => {
                        // 定位失败，尝试IP定位
                        locationStatus.innerHTML = '<i class="fa fa-exclamation-circle"></i> GPS定位失败，尝试IP定位...';
                        locationStatus.classList.remove('text-gray-500', 'text-green-500', 'text-blue-500');
                        locationStatus.classList.add('text-red-500');
                        
                        // 重新尝试IP定位
                        setTimeout(() => {
                            getLocationByIP();
                        }, 1000);
                    },
                    {
                        enableHighAccuracy: true,
                        timeout: 10000,
                        maximumAge: 300000 // 5分钟缓存
                    }
                );
            } else {
                // 浏览器不支持定位，使用IP定位
                locationStatus.innerHTML = '<i class="fa fa-info-circle"></i> 浏览器不支持定位，使用IP定位';
                locationStatus.classList.remove('text-gray-500', 'text-green-500', 'text-red-500');
                locationStatus.classList.add('text-blue-500');
                
                // 使用IP定位
                setTimeout(() => {
                    getLocationByIP();
                }, 1000);
            }
        }

        // IP定位功能
        function getLocationByIP() {
            const locationStatus = document.getElementById('location-status');
            const regionSelect = document.getElementById('region');
        
            // 使用ipapi.co API获取用户IP和地理位置信息
            fetch('https://ipapi.co/json/')
                .then(response => response.json())
                .then(data => {
                    console.log('IP定位信息:', data);
                    
                    // 获取国家和地区信息
                    const country = data.country;
                    const region = data.region;
                    const city = data.city;
                    
                    locationStatus.innerHTML = '<i class="fa fa-check-circle"></i> IP定位成功';
                    locationStatus.classList.remove('text-gray-500', 'text-red-500');
                    locationStatus.classList.add('text-green-500');
        
                    // 地区代码映射
                    const regionMap = {
                        '北京': 'beijing',
                        '上海': 'shanghai',
                        '天津': 'tianjin',
                        '重庆': 'chongqing',
                        '河北': 'hebei',
                        '山西': 'shanxi',
                        '内蒙古': 'inner_mongolia',
                        '辽宁': 'liaoning',
                        '吉林': 'jilin',
                        '黑龙江': 'heilongjiang',
                        '江苏': 'jiangsu',
                        '浙江': 'zhejiang',
                        '安徽': 'anhui',
                        '福建': 'fujian',
                        '江西': 'jiangxi',
                        '山东': 'shandong',
                        '河南': 'henan',
                        '湖北': 'hubei',
                        '湖南': 'hunan',
                        '广东': 'guangdong',
                        '广西': 'guangxi',
                        '海南': 'hainan',
                        '四川': 'sichuan',
                        '贵州': 'guizhou',
                        '云南': 'yunnan',
                        '西藏': 'tibet',
                        '陕西': 'shaanxi',
                        '甘肃': 'gansu',
                        '青海': 'qinghai',
                        '宁夏': 'ningxia',
                        '新疆': 'xinjiang',
                        '香港': 'hong_kong',
                        '澳门': 'macau',
                        '台湾': 'taiwan'
                    };
        
                    let matchedRegion = null;
        
                    // 首先尝试精确匹配省份
                    if (region && regionMap[region]) {
                        matchedRegion = regionMap[region];
                    }
                    // 其次尝试匹配城市
                    else if (region.includes('北京') || city.includes('北京')) {
                        matchedRegion = 'beijing';
                    } else if (region.includes('上海') || city.includes('上海')) {
                        matchedRegion = 'shanghai';
                    } else if (region.includes('天津') || city.includes('天津')) {
                        matchedRegion = 'tianjin';
                    } else if (region.includes('重庆') || city.includes('重庆')) {
                        matchedRegion = 'chongqing';
                    } else if (region.includes('河北') || city.includes('石家庄')) {
                        matchedRegion = 'hebei';
                    } else if (region.includes('山西') || city.includes('太原')) {
                        matchedRegion = 'shanxi';
                    } else if (region.includes('内蒙古') || city.includes('呼和浩特')) {
                        matchedRegion = 'inner_mongolia';
                    } else if (region.includes('辽宁') || city.includes('沈阳') || city.includes('大连')) {
                        matchedRegion = 'liaoning';
                    } else if (region.includes('吉林') || city.includes('长春')) {
                        matchedRegion = 'jilin';
                    } else if (region.includes('黑龙江') || city.includes('哈尔滨')) {
                        matchedRegion = 'heilongjiang';
                    } else if (region.includes('江苏') || city.includes('南京') || city.includes('苏州')) {
                        matchedRegion = 'jiangsu';
                    } else if (region.includes('浙江') || city.includes('杭州') || city.includes('宁波')) {
                        matchedRegion = 'zhejiang';
                    } else if (region.includes('安徽') || city.includes('合肥')) {
                        matchedRegion = 'anhui';
                    } else if (region.includes('福建') || city.includes('福州') || city.includes('厦门')) {
                        matchedRegion = 'fujian';
                    } else if (region.includes('江西') || city.includes('南昌')) {
                        matchedRegion = 'jiangxi';
                    } else if (region.includes('山东') || city.includes('济南') || city.includes('青岛')) {
                        matchedRegion = 'shandong';
                    } else if (region.includes('河南') || city.includes('郑州')) {
                        matchedRegion = 'henan';
                    } else if (region.includes('湖北') || city.includes('武汉')) {
                        matchedRegion = 'hubei';
                    } else if (region.includes('湖南') || city.includes('长沙')) {
                        matchedRegion = 'hunan';
                    } else if (region.includes('广东') || city.includes('广州') || city.includes('深圳')) {
                        matchedRegion = 'guangdong';
                    } else if (region.includes('广西') || city.includes('南宁')) {
                        matchedRegion = 'guangxi';
                    } else if (region.includes('海南') || city.includes('海口') || city.includes('三亚')) {
                        matchedRegion = 'hainan';
                    } else if (region.includes('四川') || city.includes('成都')) {
                        matchedRegion = 'sichuan';
                    } else if (region.includes('贵州') || city.includes('贵阳')) {
                        matchedRegion = 'guizhou';
                    } else if (region.includes('云南') || city.includes('昆明')) {
                        matchedRegion = 'yunnan';
                    } else if (region.includes('西藏') || city.includes('拉萨')) {
                        matchedRegion = 'tibet';
                    } else if (region.includes('陕西') || city.includes('西安')) {
                        matchedRegion = 'shaanxi';
                    } else if (region.includes('甘肃') || city.includes('兰州')) {
                        matchedRegion = 'gansu';
                    } else if (region.includes('青海') || city.includes('西宁')) {
                        matchedRegion = 'qinghai';
                    } else if (region.includes('宁夏') || city.includes('银川')) {
                        matchedRegion = 'ningxia';
                    } else if (region.includes('新疆') || city.includes('乌鲁木齐')) {
                        matchedRegion = 'xinjiang';
                    } else if (region.includes('香港') || city.includes('香港')) {
                        matchedRegion = 'hong_kong';
                    } else if (region.includes('澳门') || city.includes('澳门')) {
                        matchedRegion = 'macau';
                    } else if (region.includes('台湾') || city.includes('台北') || city.includes('高雄')) {
                        matchedRegion = 'taiwan';
                    }
        
                    if (matchedRegion) {
                        regionSelect.value = matchedRegion;
                        locationStatus.innerHTML = `<i class="fa fa-check-circle"></i> 已自动定位到${region}`;
                    } else {
                        // 非中国用户默认选择"海外地区"
                        regionSelect.value = 'overseas';
                        locationStatus.innerHTML = '<i class="fa fa-info-circle"></i> 检测到海外IP，已默认选择';
                        locationStatus.classList.remove('text-primary');
                        locationStatus.classList.add('text-blue-500');
                    }
                })
                .catch(error => {
                    console.error('IP定位失败:', error);
                    locationStatus.innerHTML = `<i class="fa fa-exclamation-circle"></i> 定位失败，请手动选择`;
                    locationStatus.classList.remove('text-primary');
                    locationStatus.classList.add('text-red-500');
                });
        }

        // 倒计时功能
        function startCountdown() {
            // 设置倒计时结束时间（3天后）
            const now = new Date();
            const endTime = new Date(now.getTime() + 3 * 24 * 60 * 60 * 1000);
            
            function updateCountdown() {
                const now = new Date();
                const diff = endTime - now;
                
                // 计算天、时、分、秒
                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((diff % (1000 * 60)) / 1000);
                
                // 更新DOM
                document.getElementById('days').textContent = days.toString().padStart(2, '0');
                document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
                document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
                document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');
                
                // 添加动画效果
                document.getElementById('seconds').classList.add('animate-countdown');
                setTimeout(() => {
                    document.getElementById('seconds').classList.remove('animate-countdown');
                }, 1000);
                
                // 如果倒计时结束，重置为3天
                if (diff <= 0) {
                    endTime.setTime(now.getTime() + 3 * 24 * 60 * 60 * 1000);
                }
            }
            
            // 立即更新一次
            updateCountdown();
            
            // 每秒更新一次
            setInterval(updateCountdown, 1000);
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            
            // 购买按钮点击事件
            const buyButton = document.getElementById('buy-button');
            const successModal = document.getElementById('success-modal');
            const closeModal = document.getElementById('close-modal');
            const userForm = document.getElementById('user-info-form');
            
            buyButton.addEventListener('click', function() {
                // 验证表单
                if (userForm.checkValidity()) {
                    // 获取表单数据
                    const name = document.getElementById('name').value;
                    const phone = document.getElementById('phone').value;
                    const region = document.getElementById('region').value;
                    
                    // 可以在这里添加表单数据处理逻辑，如发送到服务器
                    console.log('用户信息:', {name, phone, region});
                    
                    // 显示成功弹窗
                    successModal.classList.remove('hidden');
                    document.body.style.overflow = 'hidden'; // 防止背景滚动
                } else {
                    // 触发表单验证
                    userForm.reportValidity();
                    
                    // 滚动到表单位置
                    userForm.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    
                    // 添加震动效果
                    userForm.classList.add('animate-shake');
                    setTimeout(() => {
                        userForm.classList.remove('animate-shake');
                    }, 500);
                }
            });
            
            // 关闭弹窗
            closeModal.addEventListener('click', function() {
                successModal.classList.add('hidden');
                document.body.style.overflow = ''; // 恢复背景滚动
            });
            
            // 点击弹窗外部关闭
            successModal.addEventListener('click', function(e) {
                if (e.target === successModal) {
                    successModal.classList.add('hidden');
                    document.body.style.overflow = '';
                }
            });
            
            // 添加按钮点击效果
            buyButton.addEventListener('click', function() {
                // 创建涟漪效果
                const ripple = document.createElement('span');
                const rect = this.getBoundingClientRect();
                const size = Math.max(rect.width, rect.height);
                const x = event.clientX - rect.left - size / 2;
                const y = event.clientY - rect.top - size / 2;
                
                ripple.style.width = ripple.style.height = size + 'px';
                ripple.style.left = x + 'px';
                ripple.style.top = y + 'px';
                ripple.classList.add('ripple');
                
                this.appendChild(ripple);
                
                // 移除涟漪效果
                setTimeout(() => {
                    ripple.remove();
                }, 600);
            });
        });
    </script>
</body>
</html>
